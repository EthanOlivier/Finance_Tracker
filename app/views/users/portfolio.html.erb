<h1><%= @user.email.split("@").first %>'s Portfolio</h1>

<div class="search-bar">
    <h3>Search Stocks</h3>
    <%= form_tag portfolio_path, method: :get do %>
        <div class="col-8">
            <%= text_field_tag :stock, params[:stock], placeholder: "Stock Ticker Symbol", autofocus: true, class: "form-control" %>
        </div>
        <div class="col-3 mt-3">
            <%= button_tag type: :submit, class: "btn btn-success" do %>
                <%= "Search" %>
            <% end %>
        </div>
    <% end %>
</div>

<% if @stock %>
    <div class="mt-3">
        <div class="row">
            <div class="col-auto">
                <div class="card">
                    <div class="card-body d-flex gap-3">
                        <% if @stock.name %>
                            <span><strong>Ticker: </strong><%= @stock.ticker %></span>
                            <span><strong>Name: </strong><%= @stock.name %></span>
                            <span><strong>Current Price: </strong> <%= number_to_currency(@stock.price) %></span>
                        <% else %>
                            Unable to find stock with ticker: <strong><%= @stock.ticker %></strong>
                        <% end %>
                    </div>
                </div>
            </div>
        </div>
    </div>
<% end %>